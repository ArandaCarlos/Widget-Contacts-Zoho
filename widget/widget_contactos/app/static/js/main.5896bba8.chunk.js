(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{7:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ZOHO}));var ZOHO=function(){var e,t={},o=!1,a=void 0;return{embeddedApp:{on:function(n,o){t[n]=o,e&&"function"==typeof o&&e.getContext().Event.Listen(n,o)},init:function(){var n;if(!o)for(var c in o=!0,e=new ZSDK,a=new Promise((function(e,t){n=e})),e.OnLoad((function(){n()})),t)e.getContext().Event.Listen(c,t[c]);return a}},CRM:function(){function t(t){return t.sdkVersion="1",e.getContext().Event.Trigger("CRM_EVENT",t,!0)}function o(e){return new File([e],e.name,{type:e.type})}function a(e,n){var o={category:"ROLES"};return n&&(o.roleId=n),t(o)}function c(e,n,a,c){if(n.FileData){var r=o(n.FileData);n.FileData=r}return(e={category:"CREATE",Entity:e,RelatedID:a,APIData:n}).type=c||"RECORD",t(e)}function r(e){return e.category="BLUEPRINT",t(e)}function i(e){return e.category="APPROVALS",t(e)}function s(e,r,i){var l;if(r.FILE&&(l=o(r.FILE.file),r.FILE.file=l),l=void 0,i)l=r;else{if(l=r.url,a=r.params,s=r.headers,c=r.body,n=r.PARTS,x=r.PART_BOUNDARY,A=r.CONTENT_TYPE,D=r.RESPONSE_TYPE,r=r.FILE,!l)throw{Message:"Url missing"};if(a){var d,u=[];for(d in a)u.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));d=u.join("&"),l+=(-1<l.indexOf("?")?"&":"?")+d}l={url:l,Header:s,Body:c,CONTENT_TYPE:A,RESPONSE_TYPE:D,PARTS:n,PARTS_BOUNDARY:x,FILE:r}}return t({category:"CONNECTOR",nameSpace:e,data:l,type:i})}function l(e){return $.extend(e,{category:"UI"}),t(e)}function d(e,n,o){return t({category:"CONFIG",type:e,nameSpace:n,APIData:o})}function u(e){var n={category:"USER"};return e.ID?n.ID=e.ID:e.Type&&(n.Type=e.Type,e.page&&(n.page=e.page),e.per_page&&(n.per_page=e.per_page)),t(n)}function f(e){return t({category:"META",type:e.type,subType:e.subType,Entity:e.Entity,Id:e.Id})}return{ACTION:{setConfig:function(e){return t({category:"ACTION",type:"CUSTOM_ACTION_SAVE_CONFIG",object:e})},enableAccountAccess:function(e){return t({category:"ACTION",type:"ENABLE_ACCOUNT_ACCESS",object:e})}},FUNCTIONS:{execute:function(e,n){var o={};return n.auth_type="oauth",o.data=n,t({category:"FUNCTIONS_EXECUTE",customFunctionName:e,data:o})}},CONFIG:{getOrgInfo:function(e){return d("ORG")},getCurrentUser:function(){return d("CURRENT_USER")},GetCurrentEnvironment:function(){return d("ORG_LEVEL_INFO")}},META:{getFields:function(e){return e.type="FIELD_LIST",f(e)},getModules:function(){return f({type:"MODULE_LIST"})},getAssignmentRules:function(e){return e.type="ASSIGNMENT_RULES",f(e)},getLayouts:function(e){return e.Id=e.Id?e.Id:e.LayoutId,e.type=e.Id?"LAYOUT":"LAYOUTS",f(e)},getRelatedList:function(e){return e.type="RELATED_LIST",f(e)},getCustomViews:function(e){return e.type=e.Id?"CUSTOM_VIEW":"CUSTOM_VIEWS",f(e)},EMAIL:{getAvailableFromAliases:function(){return f({type:"EMAIL",subType:"GET_ALIAS"})}}},API:{addNotes:function(e){return c(e.Entity,{data:[{Note_Title:e.Title,Note_Content:e.Content}]},e.RecordID,"NOTES")},addNotesAttachment:function(e){return t({category:"UPDATE",type:"NOTES",Entity:e.Entity,RecordID:e.RecordID,RelatedRecordID:e.RelatedRecordID,APIData:{Files:{FileName:File.Name,FileData:File.Content}}})},coql:function(e){return t({category:"QUERY",APIData:e})},getAllRoles:function(){return a("ROLES")},getRoleById:function(e){return a("ROLE",e.id)},insertRecord:function(e){var t=e.Entity,n=e.APIData;return n.trigger=e.Trigger,c(t,n)},upsertRecord:function(e){var t=e.Entity,n=e.APIData;return n.trigger=e.Trigger,n.action="UPSERT",e.duplicate_check_fields&&e.duplicate_check_fields instanceof Array&&(n.duplicate_check_fields=e.duplicate_check_fields.join(",")),c(t,n)},getRecord:function(e){return t({category:"READ",APIData:{Entity:e.Entity,RecordID:e.RecordID,RelatedList:void 0}})},getBluePrint:function(e){return r({Entity:e.Entity,RecordID:e.RecordID,action:"GET_BLUEPRINT_STATUS"})},updateBluePrint:function(e){return r({Entity:e.Entity,RecordID:e.RecordID,BlueprintData:e.BlueprintData,action:"UPDATE_BLUEPRINT_STATUS"})},uploadFile:function(e){return e instanceof File?e=t(e={FileData:o(e),category:"FILES",type:"UPLOAD_FILE"}):e=Promise.reject("Input is not of type File"),e},getFile:function(e){return e.category="FILES",e.type="DOWNLOAD_FILE",t(e)},getAllRecords:function(e){return t({category:"READ",APIData:e})},updateRecord:function(e){var n=e.Entity,o=e.APIData;return o.trigger=e.Trigger,t({category:"UPDATE",type:"RECORD",Entity:n,APIData:o})},updateVoiceURL:function(e){return t({category:"UPDATE",type:"VOICE_URL",APIData:e})},deleteRecord:function(e){return t({category:"DELETE",type:"RECORD",Entity:e.Entity,RecordID:e.RecordID})},searchRecord:function(e){return t(e={category:"SEARCH",APIData:e})},getAllActions:function(e){return e.action="GET_ALL_ACTIONS",i(e)},getApprovalRecords:function(e){var t={};return e?e.action="GET_APPROVAL_RECORDS":(t.action="GET_APPROVAL_RECORDS",e=t),i(e)},getApprovalById:function(e){return e.action="GET_APPROVALBYID",i(e)},getApprovalsHistory:function(){return i({action:"GET_APPROVALS_HISTORY"})},approveRecord:function(e){return e.action="UPDATE_APPROVAL",i(e)},getAllUsers:function(e){return u({Type:e.Type,page:e.page,per_page:e.per_page})},getUser:function(e){return u({ID:e.ID})},getRelatedRecords:function(e){return t({category:"READ",APIData:e})},updateRelatedRecords:function(e){var n=e.Entity,a=e.RecordID,c=e.RelatedList,r=e.RelatedRecordID;return(e=e.APIData)instanceof File&&(e=o(e)),t({category:"UPDATE",type:"RELATED_RECORD",Entity:n,RecordID:a,RelatedList:c,RelatedRecordID:r,APIData:e})},delinkRelatedRecord:function(e){return t({category:"DELETE",type:"RELATED_RECORD",Entity:e.Entity,RecordID:e.RecordID,RelatedList:e.RelatedList,RelatedRecordID:e.RelatedRecordID})},attachFile:function(e){var t=e.Entity,n=e.RecordID;return c(t,e={FileName:(e=e.File).Name,FileData:e.Content},n,"ATTACHMENT")},getAllProfiles:function(e){return t({category:"PROFILES",type:"GET_ALL_PROFILES"})},getProfile:function(e){return t({category:"PROFILES",type:"GET_PROFILE",ID:e.ID})},updateProfile:function(e){return t({category:"UPDATE",type:"PROFILE",ID:e.ID,APIData:e.APIData})},getOrgVariable:function(e){return d("VARIABLE",e)},sendMail:function(e){return t(e={category:"MAIL",APIData:e})}},UI:{Resize:function(e){return l(e={action:"RESIZE",data:{width:e.width,height:e.height}})},Setting:{open:function(e){return l(e={action:{setting:"OPEN"},data:e})}},Dialer:{maximize:function(){return l({action:{telephony:"MAXIMIZE"}})},minimize:function(){return l({action:{telephony:"MINIMIZE"}})},notify:function(){return l({action:{telephony:"NOTIFY"}})}},Record:{open:function(e){return l(e={action:{record:"OPEN"},data:{Entity:e.Entity,RecordID:e.RecordID,target:e.Target}})},edit:function(e){return l(e={action:{record:"EDIT"},data:{Entity:e.Entity,RecordID:e.RecordID,target:e.Target}})},create:function(e){return l(e={action:{record:"CREATE"},data:{Entity:e.Entity,RecordID:e.RecordID,target:e.Target}})},populate:function(e){return l({action:{record:"POPULATE"},data:e})}},Popup:{close:function(){return l({action:{popup:"CLOSE"}})},closeReload:function(){return l({action:{popup:"CLOSE_RELOAD"}})}},Widget:{open:function(e){return l(e={action:{webTab:"OPEN"},data:e})}},WebTab:{open:function(e){return l(e={action:{webTab:"OPEN"},data:e})},history:{pushState:function(e){return l(e={action:{webTab:"HISTORY"},data:e})}}}},HTTP:{get:function(e){return s("wget.get",e)},post:function(e){return s("wget.post",e)},put:function(e){return s("wget.put",e)},patch:function(e){return s("wget.patch",e)},delete:function(e){return s("wget.delete",e)}},CONNECTOR:{invokeAPI:function(e,t){return s(e,t,"CONNECTOR_API")},authorize:function(e){return s(e,{},"CONNECTOR_AUTHORIZE")},isConnectorAuthorized:function(e){return s(e,{invokeType:"ISAUTHORIZE"},"CONNECTOR_API")},revokeConnector:function(e){return s(e,{},"CONNECTOR_REVOKE")}},CONNECTION:{invoke:function(e,n){var o={},a={};return a.url=n.url,a.method=n.method,a.param_type=n.param_type,a.parameters=JSON.stringify(n.parameters),a.headers=JSON.stringify(n.headers),o.data=a,t({category:"CRM_CONNECTION",connectionName:e,data:o})}},BLUEPRINT:{proceed:function(){return t({category:"CRM_BLUEPRINT"})}}}}()}}(),ZSDKUtil=function(e){function t(e){}function n(e){var t={};return(e=e||window.location.href).substr(e.indexOf("?")+1).split("&").forEach((function(e,n){var o=e.split("=");t[o[0]]=o[1]})),t.hasOwnProperty("serviceOrigin")&&(t.serviceOrigin=decodeURIComponent(t.serviceOrigin)),t}var o,a=n();return t.prototype.Info=function(){(e.isDevMode()||e.isLogEnabled())&&window.console.info.apply(null,arguments)},t.prototype.Error=function(){(e.isDevMode()||e.isLogEnabled())&&window.console.error.apply(null,arguments)},e.GetQueryParams=n,e.isDevMode=function(){return a&&a.isDevMode},e.isLogEnabled=function(){return a&&a.isLogEnabled},e.getLogger=function(){return o&&o instanceof t||(o=new t),o},e.Sleep=function(e){for(var t=(new Date).getTime();t+e>(new Date).getTime(););},e}(window.ZSDKUtil||{}),ZSDKMessageManager=function(e){function t(e){try{var t="string"===typeof e.data?JSON.parse(e.data):e.data}catch(A){t=e.data}var r=t.type,i=t.eventName;try{var s;if(!(s="SET_CONTEXT"===i)){var l=e.source,m=e.origin;s=!(!d.isAppRegistered()||u!==l||f!==m)||Error("Un-Authorized Message.")}if(s)switch(r){case"FRAMEWORK.EVENT":var j={SET_CONTEXT:n,UPDATE_CONTEXT:o,EVENT_RESPONSE:a,EVENT_RESPONSE_FAILURE:c}[t.eventName];j&&"function"===typeof j?j(e,t):ZSDKEventManager.NotifyEventListeners(d.AppContext,t.eventName,t.data);break;default:d.MessageInterceptor(e,t)}}catch(A){b.Error("[SDK.MessageHandler] => ",A.stack)}}function n(e,t){u=window.parent,f=d.QueryParams.serviceOrigin,d.SetContext(t.data),d.ExecuteLoadHandler()}function o(e,t){}function a(e,t){r(t.promiseid,!0,t.data)}function c(e,t){r(t.promiseid,!1,t.data)}function r(e,t,n){j.hasOwnProperty(e)&&(t?j[e].resolve(n):j[e].reject(n),j[e]=void 0,delete j[e])}function i(e){return new Promise((function(t,n){j[e]={resolve:t,reject:n,time:(new Date).getTime()}}))}function s(e){if("object"===typeof e&&(e.appOrigin=encodeURIComponent(l())),!u)throw Error("Parentwindow reference not found.");u.postMessage(e,d.QueryParams.serviceOrigin)}function l(){return window.location.protocol+"//"+window.location.host+window.location.pathname}var d,u,f,b=ZSDKUtil.getLogger(),m=100,j={};return e.Init=function(n,o){if(!n||"object"!==typeof n)throw Error("Invalid Context object passed");if(o&&"object"!==typeof o)throw Error("Invalid Configuration Passed to MessageManager");return d=n,t.bind(e)},e.RegisterApp=function(){var e={type:"SDK.EVENT",eventName:"REGISTER",appOrigin:encodeURIComponent(l())};window.parent.postMessage(e,d.QueryParams.serviceOrigin)},e.DERegisterApp=function(){s({type:"SDK.EVENT",eventName:"DEREGISTER",uniqueID:d.getUniqueID()})},e.SendRequest=function(e){if(!e||"object"!==typeof e)throw Error("Invalid Options passed");var t;return t="Promise"+m++,s(e={type:"SDK.EVENT",eventName:"HTTP_REQUEST",uniqueID:d.getUniqueID(),time:(new Date).getTime(),promiseid:t,data:e}),t=i(t)},e.TriggerEvent=function(e,t,n){if(!e)throw Error("Invalid Eventname : ",e);var o=n?"Promise"+m++:void 0;if(s(e={type:"SDK.EVENT",eventName:e,uniqueID:d.getUniqueID(),time:(new Date).getTime(),promiseid:o,data:t}),n)return i(o)},e}(window.ZSDKMessageManager||{}),ZSDKEventManager=function(e){var t=ZSDKUtil.getLogger(),n={};return e.AttachEventListener=function(e,t){"function"===typeof t&&(Array.isArray(n[e])||(n[e]=[]),n[e].push(t))},e.NotifyEventListeners=function(e,o,a){var c=o.match(/^__[A-Za-z_]+__$/gi);if(Array.isArray(c),(c=n[o])&&Array.isArray(c))for(o=0;o<c.length;o++)c[o].call(e,a);else t.Info("Cannot find EventListeners for Event : ",o)},e.NotifyInternalEventHandler=function(e,t){var n=t.eventName;"__APP_INIT__"===n?(e.SetContext(t.data),e.ExecuteLoadHandler()):"__APP_CONTEXT_UPDATE__"===n&&(e.UpdateContext(t.data),e.ExecuteContextUpdateHandler())},e}(window.ZSDKEventManager||{});function ZSDK(){function b(){"function"!==typeof p?z.Error("No OnLoad Handler provided to execute."):C?z.Error("OnLoad event already triggered."):(p.call(r,r),C=!0)}function l(){q.call(r,r)}function m(){return B}function g(e,t,n){return ZSDKMessageManager.TriggerEvent(e,t,n)}function c(t){z.Info("Setting AppContext data");var n=t&&t.model||{};if("undefined"!==typeof ZSDKModelManager){for(var o in n)ZSDKModelManager.AddModel(o,n[o]);r.Model=ZSDKModelManager.GetModelStore()}e=t.uniqueID,a=t.connectors,z.Info("App Connectors ",a),B=!0}function h(){return e}function n(e){}function y(){return a}function w(e){t("/app-translations/"+e+".json",(function(e){v=JSON.parse(e),u()}))}function t(e,t){var n=new XMLHttpRequest;n.open("GET",e,!1),n.onreadystatechange=function(){4==n.readyState&&"200"==n.status&&t(n.responseText)},n.send(null)}function f(e,t,n){for(var o="";o!=e;)o=e,e=e.replace(t,n);return e}function k(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,a=n.length;o<a;++o){var c=n[o];if(!(c in e))return;e=e[c]}return e}function u(){var a=document.querySelectorAll("[data-i18n]"),b;for(b in a)if(a.hasOwnProperty(b)){var c=k(v,a[b].getAttribute("data-i18n"));if(!c)return!1;if(a[b].hasAttribute("data-options")){var d=JSON.parse(JSON.stringify(eval("("+a[b].getAttribute("data-options")+")"))),e=Object.keys(d),g;for(g in e)c=f(c,"${"+e[g]+"}",d[e[g]])}a[b].innerHTML=c}}var p,q,a,d,e,v={},z=ZSDKUtil.getLogger(),B=!1,C=!1;this.isContextReady=!1,this.HelperContext={},this.isDevMode=!1,this.getContext=function(){return r};var r={Model:{},Event:{}};r.Event.Listen=function(e,t){ZSDKEventManager.AttachEventListener(e,t)},r.Event.Trigger=g,r.GetRequest=function(e){return ZSDKMessageManager.SendRequest(e)},r.QueryParams=d,r.Translate=function(a,b){var c="";if(a&&(c=k(v,a)),!c)return!1;if(b){var d=JSON.parse(JSON.stringify(eval(b))),e=Object.keys(d);for(a in e)c=f(c,"${"+e[a]+"}",d[e[a]])}return c},this.OnLoad=function(e){if("function"!==typeof e)throw Error("Invalid Function value is passed");p=e,B&&b()},this.OnUnLoad=function(e){},this.OnContextUpdate=function(e){q=e},function(){d=ZSDKUtil.GetQueryParams();var e={};e.isDevMode=!!d.isDevMode,e.ExecuteLoadHandler=b,e.SetContext=c,e.UpdateContext=n,e.QueryParams=d,e.GetConnectors=y,e.TriggerEvent=g,e.ExecuteContextUpdateHandler=l,e.getUniqueID=h,e.isAppRegistered=m;var t=ZSDKMessageManager.Init(e);window.addEventListener("message",t),window.addEventListener("unload",(function(){ZSDKMessageManager.DERegisterApp()})),"undefined"!==typeof ZSDKModelManager&&ZSDKModelManager.Init(e),ZSDKMessageManager.RegisterApp()}()}},77:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(9),c=n.n(a),r=n(5),i=n(14),s=n(26),l=n(8),d=function(e){var t=!1,n=e;if(n.includes("+54")){var o=n.substr(3);if(10==o.length){var a=!1;[11,348,220,221,223,230,236,237,249,260,261,263,264,266,280,291,294,297,298,299,336,341,342,343,345,348,351,353,358,362,3732,370,376,379,380,381,383,385,387,388,2202,2221,2223,2224,2225,2226,2227,2229,2241,2242,2243,2244,2245,2246,2252,2254,2255,2257,2261,2262,2264,2265,2266,2267,2268,2271,2272,2273,2274,2281,2283,2284,2285,2286,2291,2292,2296,2297,2302,2314,2316,2317,2320,2323,2324,2325,2326,2331,2333,2334,2335,2336,2337,2338,2342,2343,2344,2345,2346,2352,2353,2354,2355,2356,2357,2358,2392,2393,2394,2395,2396,2473,2474,2475,2477,2478,2622,2624,2625,2626,2646,2647,2648,2651,2652,2655,2656,2657,2658,2901,2902,2903,2920,2921,2922,2923,2924,2925,2926,2927,2928,2929,2931,2932,2933,2934,2935,2936,2940,2942,2945,2946,2948,2952,2953,2954,2962,2963,2964,2966,2972,2982,2983,3327,3329,3382,3385,3387,3388,3400,3401,3402,3404,3405,3406,3407,3408,3409,3435,3436,3437,3438,3442,3444,3445,3446,3447,3454,3455,3456,3458,3460,3462,3463,3464,3465,3466,3467,3468,3469,3471,3472,3476,3482,3483,3487,3489,3491,3492,3493,3496,3497,3498,3521,3522,3524,3525,3532,3533,3537,3541,3542,3543,3544,3546,3547,3548,3549,3562,3563,3564,3571,3572,3573,3574,3575,3576,3582,3583,3584,3585,3711,3715,3716,3718,3721,3725,3731,3734,3735,3741,3743,3751,3754,3755,3756,3757,3758,3772,3773,3774,3775,3777,3781,3782,3786,3821,3825,3826,3827,3832,3835,3837,3838,3841,3843,3844,3845,3846,3854,3855,3856,3857,3858,3861,3862,3863,3865,3867,3868,3869,3873,3876,3877,3878,3885,3886,3889,3888,3891,3892,3894].forEach((function(e){o.startsWith(e)&&(a=!0)})),t=!!a}else if(11==o.length&&o.startsWith("9")){var c=!1;[911,9348,9220,9221,9223,9230,9236,9237,9249,9260,9261,9263,9264,9266,9280,9291,9294,9297,9298,9299,9336,9341,9342,9343,9345,9348,9351,9353,9358,9362,93732,9370,9376,9379,9380,9381,9383,9385,9387,9388,92202,92221,92223,92224,92225,92226,92227,92229,92241,92242,92243,92244,92245,92246,92252,92254,92255,92257,92261,92262,92264,92265,92266,92267,92268,92271,92272,92273,92274,92281,92283,92284,92285,92286,92291,92292,92296,92297,92302,92314,92316,92317,92320,92323,92324,92325,92326,92331,92333,92334,92335,92336,92337,92338,92342,92343,92344,92345,92346,92352,92353,92354,92355,92356,92357,92358,92392,92393,92394,92395,92396,92473,92474,92475,92477,92478,92622,92624,92625,92626,92646,92647,92648,92651,92652,92655,92656,92657,92658,92901,92902,92903,92920,92921,92922,92923,92924,92925,92926,92927,92928,92929,92931,92932,92933,92934,92935,92936,92940,92942,92945,92946,92948,92952,92953,92954,92962,92963,92964,92966,92972,92982,92983,93327,93329,93382,93385,93387,93388,93400,93401,93402,93404,93405,93406,93407,93408,93409,93435,93436,93437,93438,93442,93444,93445,93446,93447,93454,93455,93456,93458,93460,93462,93463,93464,93465,93466,93467,93468,93469,93471,93472,93476,93482,93483,93487,93489,93491,93492,93493,93496,93497,93498,93521,93522,93524,93525,93532,93533,93537,93541,93542,93543,93544,93546,93547,93548,93549,93562,93563,93564,93571,93572,93573,93574,93575,93576,93582,93583,93584,93585,93711,93715,93716,93718,93721,93725,93731,93734,93735,93741,93743,93751,93754,93755,93756,93757,93758,93772,93773,93774,93775,93777,93781,93782,93786,93821,93825,93826,93827,93832,93835,93837,93838,93841,93843,93844,93845,93846,93854,93855,93856,93857,93858,93861,93862,93863,93865,93867,93868,93869,93873,93876,93877,93878,93885,93886,93889,93888,93891,93892,93894].forEach((function(e){o.startsWith(e)&&(c=!0)})),t=!!c}else t=!1}if(n.includes("+55")){var r=n.substr(3),i=r.substr(2,1);if(10==r.length&&"9"!==i){var s=!1;[11,21,31,51,41,85,61,71,81,19,62,16,12,48,17,83,84,15,21,11,91,27,13,12,79,92,27,71,32,43,54,82,34,67,34,65,86,44,11,47,16,21,47,21,14,24,83,51,19,14,41,19,47,81,98,11,81,31,13,22,19,69,81,21,13,11,38,51,62,64,12,11,91,12,77,95,22,44,75,45,19,21,47,21,21,21,22,14,84,19,24,73,69,24,68,22,93,21,11,19,21,21,19,61,21,77,15,19,11,10,19,16,27,22,45,73,11,11,66,33,11,99,84,67,18,35,42,87,15,47,31,33,99,18,54,47,48,53,96,35,48,13,19,51,48,52,27,41,41,12,51,51,16,16,19,11].forEach((function(e){r.startsWith(e)&&(s=!0)})),t=!!s}else if(11==r.length&&"9"==i){var l=!1;[119,219,319,519,419,859,619,719,819,199,629,169,129,489,179,839,849,159,219,119,919,279,139,129,799,929,279,719,329,439,549,829,349,679,349,659,869,449,119,479,169,219,479,219,149,249,839,519,199,149,419,199,479,819,989,119,819,319,139,229,199,699,819,219,139,119,389,519,629,649,129,119,919,129,779,959,229,449,759,459,199,219,479,219,219,219,229,149,849,199,249,739,699,249,689,229,939,219,119,199,219,219,199,619,219,779,159,199,119,199,169,279,229,459,739,119,119,669,339,119,999,849,679,189,359,429,879,159,479,319,339,999,189,549,479,489,539,969,359,489,139,199,519,489,529,279,419,419,129,519,519,169,169,199,119].forEach((function(e){r.startsWith(e)&&(l=!0)})),t=!!l}else t=!1}if(n.includes("+56")){var d=n.substr(3);if(9!=d.length||d.startsWith("9"))t=!(9!=d.length||!d.startsWith("9"));else{var u=!1;[32,2,41,55,51,57,72,451].forEach((function(e){d.startsWith(e)&&(u=!0)})),t=!!u}}if(n.includes("+52")){var f=n.substr(3);if(10==f.length){var b=!1;[33,35,41,55,56,81,221,222,228,229,241,246,271,311,312,314,315,322,341,351,442,443,444,449,452,457,461,462,464,473,477,492,612,614,618,624,629,644,646,656,661,662,664,665,667,668,669,686,715,722,744,755,771,777,777,833,834,844,866,867,868,871,871,899,921,951,961,962,963,981,984,984,993,998,999,415,726,55,938,961,631,971].forEach((function(e){f.startsWith(e)&&(b=!0)})),t=!!b}else if(11==f.length&&f.startsWith(1)){var m=!1;[133,135,141,155,156,181,1221,1222,1228,1229,1241,1246,1271,1311,1312,1314,1315,1322,1341,1351,1442,1443,1444,1449,1452,1457,1461,1462,1464,1473,1477,1492,1612,1614,1618,1624,1629,1644,1646,1656,1661,1662,1664,1665,1667,1668,1669,1686,1715,1722,1744,1755,1771,1777,1777,1833,1834,1844,1866,1867,1868,1871,1871,1899,1921,1951,1961,1962,1963,1981,1984,1984,1993,1998,1999,1415,1726,155,1938,1961,1631,1971].forEach((function(e){f.startsWith(e)&&(m=!0)})),t=!!m}else t=!1}if(n.includes("+57")){var j=n.substr(3);if(8!=j.length||j.startsWith("3"))t=!(10!=j.length||!j.startsWith("3"));else{var p=!1;[1,5,4,2,7,6,8].forEach((function(e){j.startsWith(e)&&(p=!0)})),t=!!p}}if(n.includes("+506")){var h=n.substr(4);if(8!=h.length||h.startsWith("6")||h.startsWith("7")||h.startsWith("8"))t=!(8!=h.length||!(h.startsWith("6")||h.startsWith("7")||h.startsWith("8")));else{var O=!1;[22].forEach((function(e){h.startsWith(e)&&(O=!0)})),t=!!O}}if(n.includes("+593")){var g=n.substr(4);if(8!=g.length||g.startsWith("9"))t=!(9!=g.length||!g.startsWith("9"));else{var E=!1;[2,4].forEach((function(e){g.startsWith(e)&&(E=!0)})),t=!!E}}if(n.includes("+51")){var v=n.substr(3);if(8!=v.length||v.startsWith("9"))t=!(9!=v.length||!v.startsWith("9"));else{var _=!1;[74,73,44,54,84,1].forEach((function(e){v.startsWith(e)&&(_=!0)})),t=!!_}}if(n.includes("+598")){var y=n.substr(4);if(8!=y.length||y.startsWith("9"))t=!(8!=y.length||!y.startsWith("9"));else{var C=!1;[2,42,33].forEach((function(e){y.startsWith(e)&&(C=!0)})),t=!!C}}return t},u=n(0),f=n(101),b=n(23),m=n.n(b),j=n(102),p=n(52),h=n(97),O=(Object(p.a)({overrides:{MuiTooltip:{tooltip:{fontSize:"1em"}}}}),n(7)),g=function(e){var t=e.contacts,n=t.filter((function(e){return 1==e.neg})),a=t.filter((function(e){return e.Stores_ids.length>0})),c=t.filter((function(e){return e.stores_fotos.length>0})),r=t.filter((function(e){return e.stores_credenciales.length>0})),i=e.record;var s=function(){t.forEach((function(t){O.a.CRM.API.insertRecord({Entity:"Contacts",APIData:t}).then((function(n){var o=n.data[0].details.id;t.hasOwnProperty("neg")&&(O.a.CRM.API.insertRecord({Entity:"Deals_X_Contacts",APIData:{Contactos:o,Negociaci_n:e.id}}).then((function(e){})),t.Rol_Contacto.includes("Legal Representative")?(O.a.CRM.API.updateRecord({Entity:"Contacts",APIData:{id:o,Raz_n_Social:i.Raz_n_Social.id,Brand:i.Brand.id}}).then((function(e){console.log(e)})),O.a.CRM.API.updateRecord({Entity:"Razones_Sociales",APIData:{id:i.Raz_n_Social.id,Legal_First_Name:t.First_Name,Legal_Last_Name:t.Last_Name,Telefono:t.Mobile,Legal_Email:t.Email}}).then((function(e){}))):O.a.CRM.API.updateRecord({Entity:"Contacts",APIData:{id:o,Brand:i.Brand.id}}).then((function(e){console.log(e)}))),t.Stores_ids.length>0&&1==t.contacto&&t.Rol_Contacto.includes("Store Decision Maker")&&t.Stores_ids.forEach((function(e){console.log(e.id+" "+o),O.a.CRM.API.insertRecord({Entity:"Stores_X_Contacts",APIData:{Stores:e.id,Contactos:o}}).then((function(e){console.log(e)}))})),t.stores_fotos.length>0&&1==t.foto&&t.stores_fotos.forEach((function(e){O.a.CRM.API.getRecord({Entity:"Accounts",RecordID:e.id}).then((function(e){var t=e.data[0];if(null!=t.Solicitud_Fotograf_a){var n=t.Solicitud_Fotograf_a.id;null!=n&&O.a.CRM.API.updateRecord({Entity:"Fotograf_a",APIData:{id:n,Contacto:o}}).then((function(e){console.log(e)}))}}))})),t.stores_credenciales.length>0&&1==t.credenciales&&t.stores_credenciales.forEach((function(e){console.log(e.id+" "+o),O.a.CRM.API.insertRecord({Entity:"Stores_X_Contacts",APIData:{Stores:e.id,Contactos:o}}).then((function(e){console.log(e)})),O.a.CRM.API.updateRecord({Entity:"Accounts",APIData:{id:e.id,Correo_eletr_nico:t.Email}}).then((function(e){console.log(e)}))}))}))})),O.a.CRM.API.updateRecord({Entity:"Deals",APIData:{id:e.id,Informaci_n_de_Contacto_Completa:"SI"}}).then((function(e){console.log(e)}))};return Object(u.jsx)(o.Fragment,{children:Object(u.jsxs)("div",{className:"mt-4 ",children:[Object(u.jsx)("div",{className:"text-center ",children:Object(u.jsx)("h4",{children:"Contactos Agregados y Asociaciones"})}),Object(u.jsxs)("table",{className:"mx-auto mt-3 table container ml-4 w-75 table-responsive",children:[Object(u.jsx)("thead",{className:"table-secondary",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"Contactos Negociaci\xf3n"}),Object(u.jsx)("th",{scope:"col",children:"Contactos Stores"}),Object(u.jsx)("th",{scope:"col",children:"Contactos Fotograf\xeda"}),Object(u.jsx)("th",{scope:"col",children:"Credenciales"})]})}),Object(u.jsx)("tbody",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:n.map((function(e){return Object(u.jsx)("div",{className:"fw-bold",children:e.Email})}))}),Object(u.jsx)("td",{children:a.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"fw-bold",children:e.First_Name+" "+e.Last_Name}),"  ",e.Stores_ids.map((function(e){return Object(u.jsxs)("div",{children:[" - ",e.name]},e.id)}))]},e.Email)}))}),Object(u.jsx)("td",{children:c.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"fw-bold",children:e.First_Name+" "+e.Last_Name}),"  ",e.stores_fotos.map((function(e){return Object(u.jsxs)("div",{children:[" - ",e.name]},e.id)}))]},e.Email)}))}),Object(u.jsx)("td",{children:r.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"fw-bold",children:e.First_Name+" "+e.Last_Name}),"  ",e.stores_credenciales.map((function(e){return Object(u.jsxs)("div",{children:[" - ",e.name]},e.id)}))]},e.Email)}))})]})})]}),Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)("span",{className:"text-left ",children:Object(u.jsx)("button",{type:"submit",id:"button",className:"btn btn-primary me-3",onClick:function(){e.volver()},children:"Volver"})}),Object(u.jsx)("span",{className:"text-center",children:Object(u.jsx)("button",{type:"submit",id:"button",className:"btn btn-primary ",onClick:function(){s(),O.a.embeddedApp.init().then((function(){return O.a.CRM.BLUEPRINT.proceed()})).then((function(e){console.log(e)}))},children:"Continuar"})})]})]})})},E=Object(o.createContext)();function v(e){var t=e.children,n=Object(o.useState)({contact:null}),a=Object(r.a)(n,2),c=a[0],i=a[1],s=Object(o.useState)({contactoTipo:null}),l=Object(r.a)(s,2),d=l[0],f=l[1],b=Object(o.useState)([]),m=Object(r.a)(b,2),j=m[0],p=m[1];return Object(u.jsx)(E.Provider,{value:{contacto:c,setContacto:i,contactoTipo:d,setContactoTipo:f,telTienda:j,setTelTienda:p},children:t})}var _=function(){var e=Object(o.useContext)(E);if(!e)throw new Error("UseWidget inside ZohoContext");return e},y=function(e){var t=Object(o.useState)(e.stores),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(o.useState)(!1),l=Object(r.a)(s,2),f=l[0],b=l[1],m=Object(o.useState)([]),j=Object(r.a)(m,2),p=j[0],h=j[1],g=Object(o.useState)(!1),E=Object(r.a)(g,2),v=E[0],_=E[1];Object(o.useEffect)((function(){e.stores.forEach((function(e){e.Check_Robocall=null,e.Check=null,e.Control=null,e.Tel_fono_Tienda=null}))}),[]);var y=function(){e.stores.forEach((function(e){console.log(e.Control),console.log(e.Check);var t=e.Tel_fono_Tienda;(t.includes("+51")||t.includes("+54")||t.includes("+55")||t.includes("+57")||t.includes("+56"))&&(t=t.substr(3)),(t.includes("+506")||t.includes("+593")||t.includes("+598"))&&null!=t&&(t=t.substr(4)),t.includes("+52")&&null!=t&&(13==t.length&&(t=t.substr(3)),14==t.length&&(t=t.substr(4))),O.a.CRM.API.updateRecord({Entity:"Accounts",APIData:{id:e.id,Tel_fono_Tienda:t,Phone:e.Check,WhatsApp_Contacto_Principal:e.Tel_fono_Tienda}}).then((function(e){console.log(e)}))}))},C=function(e,t,n,o){console.log(p);var r=a.findIndex((function(t){return t.id==e})),s=Object(i.a)(a);d(o.target.value)?(document.getElementById(e+t+n).classList.remove("is-invalid"),"telefonoTienda"==n?(s[r].Tel_fono_Tienda=o.target.value,s[r].Check_Robocall="OK",h([].concat(Object(i.a)(p),[s[r].Tel_fono_Tienda]))):(s[r].Check=o.target.value,s[r].Control="OK",h([].concat(Object(i.a)(p),[s[r].Check])))):(document.getElementById(e+t+n).classList.add("is-invalid"),"telefonoTienda"==n?(s[r].Tel_fono_Tienda=o.target.value,s[r].Check_Robocall=null):(s[r].Check=o.target.value,s[r].Control=null));c(s)};return Object(u.jsxs)("div",{className:"table-responsive",children:[Object(u.jsxs)("div",{className:"container text-center mt-3 mb-3",children:[Object(u.jsx)("h4",{children:"Tel\xe9fonos Stores"}),Object(u.jsx)("h6",{children:"Ac\xe1 debes indicar el tel\xe9fono que cada tienda tiene en caso que los usuarios necesiten comunicarse con la tienda"}),Object(u.jsx)("h6",{children:"Los numeros de contacto no se pueden repetir"})]}),Object(u.jsxs)("table",{className:"mx-auto mt-3 table container ml-4 w-100 ",children:[Object(u.jsx)("thead",{className:"table-secondary",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"Store"}),Object(u.jsx)("th",{scope:"col",children:"Whatsapp de la Tienda"}),Object(u.jsx)("th",{scope:"col",children:"Tel\xe9fono Fijo de la Tienda"})]})}),Object(u.jsx)("tbody",{children:e.stores.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:"fw-bold mt-1",id:e.id,children:e.Account_Name})}),Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:"row",id:e.id,children:Object(u.jsxs)("div",{className:"col-sm-10",children:[Object(u.jsx)("input",{type:"cel1",className:"form-control",name:"Mobile",id:e.id+e.Account_Name+"telefonoTienda",placeholder:"ejemplo: +552131354684",onChange:function(t){return C(e.id,e.Account_Name,"telefonoTienda",t)},required:!0}),Object(u.jsx)("div",{id:"validationServerUsernameFeedback",className:"invalid-feedback",children:'(c\xf3d de pa\xeds "+52")(cod ciudad "22") XXXXXXX'})]})})}),Object(u.jsx)("td",{children:Object(u.jsx)("div",{className:"row",id:e.id,children:Object(u.jsxs)("div",{className:"col-sm-10",children:[Object(u.jsx)("input",{type:"cel2",className:"form-control",name:"Mobile",id:e.id+e.Account_Name+"telefonoFijo",placeholder:"ejemplo: +552131354684",onChange:function(t){return C(e.id,e.Account_Name,"telefonoFijo",t)},required:!0}),Object(u.jsx)("div",{id:"validationServerUsernameFeedback",className:"invalid-feedback",children:'(c\xf3d de pa\xeds "+52")(cod ciudad "22") XXXXXXX'})]})})})]})}))})]}),Object(u.jsxs)("div",{className:"text-center",style:{marginTop:"50px"},children:[Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",id:"button",className:"btn btn-primary ",onClick:function(t){t.preventDefault();var n=!0,o=!0,a="";e.stores.forEach((function(e){var t=0;"OK"!=e.Check_Robocall&&"OK"!=e.Control&&(n=!1),p.forEach((function(n){n==e.Tel_fono_Tienda&&(t+=1)>=2&&(a=n)})),"OK"!=e.Check_Robocall&&(e.Tel_fono_Tienda=null),"OK"!=e.Control&&(e.Check=null),t>=2&&(o=!1,console.log(a)),console.log(o+""+p)})),n&&o?(y(),e.onSubmitTelefonoStore()):o?(_(!1),b(!0)):(e.stores.forEach((function(e){var t=document.getElementById(e.id+e.Account_Name+"telefonoTienda");t.value="",(t=document.getElementById(e.id+e.Account_Name+"telefonoFijo")).value="",e.Check=null,e.Tel_fono_Tienda=null,e.Check_Robocall=null,e.Control=null,b(!1)})),h([]),_(!0))},children:"Continuar"})}),f?Object(u.jsx)("div",{className:"mt-3 text-danger",children:"Debe cargar un numero por store"}):Object(u.jsx)("span",{}),v?Object(u.jsx)("div",{className:"mt-3 text-danger",children:"Los numeros del contacto no se pueden repetir"}):Object(u.jsx)("span",{})]})]})},C={iconButton:{padding:0,marginLeft:5}},N=Object(p.a)({overrides:{MuiTooltip:{tooltip:{fontSize:"1em"}}}}),R=function(e){var t=Object(o.useState)(e.stores.data),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(o.useState)([]),l=Object(r.a)(s,2),d=l[0],b=l[1],p=_(),O=p.contacto,g=(p.setContacto,Object(o.useState)()),E=Object(r.a)(g,2),v=E[0],y=E[1],R=_(),x=(R.contactoTipo,R.setContactoTipo);Object(o.useEffect)((function(){var e=Object(i.a)(a);e.forEach((function(e){e.Check=null,e.Check_RoboCall=null,e.Control=null})),c(e)}),[]),Object(o.useEffect)((function(){console.log(O),null!=O.contact&&T(O.contact,v.id,v.mod)}),[O]);var I=function(t,n){y({id:t,mod:n}),"contacto"==n&&x("Store Decision Maker"),"fotografia"==n&&x("Contacto Encargado de Fotograf\xeda"),"credenciales"==n&&x("Contacto encargado de Recibir Credenciales"),e.showPopUp()},T=function(e,t,n){console.log(e,t,n);var o=a.findIndex((function(e){return e.id===t})),r=Object(i.a)(a),s=Object(i.a)(d);if("contacto"==n){var l=d.findIndex((function(e){return"contacto"==e.mod&&e.mapStore.id==t}));if(console.log(l),l>-1)s[l].contact=e.Email,r[o].Check=e.First_Name+" "+e.Last_Name;else{r[o].Check=e.First_Name+" "+e.Last_Name;var u=r[o],f={name:u.Account_Name,id:u.id,tipo:n},m={contact:e.Email,mapStore:f,mod:n};b([].concat(Object(i.a)(d),[m]))}}if("fotografia"==n){var j=d.findIndex((function(e){return"fotografia"==e.mod&&e.mapStore.id==t}));if(console.log(j),j>-1)s[j].contact=e.Email,r[o].Check_RoboCall=e.First_Name+" "+e.Last_Name;else{r[o].Check_RoboCall=e.First_Name+" "+e.Last_Name;var p=r[o],h={name:p.Account_Name,id:p.id,tipo:n},O={contact:e.Email,mapStore:h,mod:n};b([].concat(Object(i.a)(d),[O]))}}if("credenciales"==n){var g=d.findIndex((function(e){return"credenciales"==e.mod&&e.mapStore.id==t}));if(console.log(g),g>-1)s[g].contact=e.Email,r[o].Control=e.First_Name+" "+e.Last_Name;else{r[o].Control=e.First_Name+" "+e.Last_Name;var E=r[o],v={name:E.Account_Name,id:E.id,tipo:n},_={contact:e.Email,mapStore:v,mod:n};b([].concat(Object(i.a)(d),[_]))}}c(r),console.log(d)};return Object(u.jsxs)("div",{className:"table-responsive",children:[Object(u.jsxs)("table",{className:"mx-auto mt-3 table container ml-4 w-100 ",children:[Object(u.jsx)("thead",{className:"table-secondary",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"Store"}),Object(u.jsxs)("th",{scope:"col",children:["Store Decision Maker",Object(u.jsx)(f.a,{title:"Persona encargada de tomar las decisiones en el store.",children:Object(u.jsx)(j.a,{"aria-label":"Store Decision Maker",style:C.iconButton,children:Object(u.jsx)(m.a,{color:"primary"})})})]}),Object(u.jsxs)("th",{scope:"col",children:["Fotograf\xeda",Object(u.jsx)(f.a,{title:"Persona encargada de proveer todas im\xe1genes de la tienda.",children:Object(u.jsx)(j.a,{"aria-label":"Fotograf\xeda",style:C.iconButton,children:Object(u.jsx)(m.a,{color:"primary"})})})]}),Object(u.jsxs)("th",{scope:"col",children:["Recibe Credenciales",Object(u.jsx)(h.a,{theme:N,children:Object(u.jsx)(f.a,{title:"Contacto al que le van a llegar las credenciales de la tienda.",children:Object(u.jsx)(j.a,{"aria-label":"Credenciales",style:C.iconButton,children:Object(u.jsx)(m.a,{color:"primary"})})})})]})]})}),Object(u.jsx)("tbody",{children:e.stores.data.map((function(t){return Object(u.jsxs)("tr",{className:"mt-3",children:[Object(u.jsx)("td",{children:t.Account_Name}),Object(u.jsx)("td",{children:Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:null!=t.Check?t.Check:Object(u.jsx)("span",{children:"Contacts"})}),Object(u.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink",children:e.contacts.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return T(e,t.id,"contacto")},children:e.First_Name+" "+e.Last_Name})},e.Email)}))}),Object(u.jsx)("span",{className:"ms-3",children:Object(u.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return I(t.id,"contacto")},children:"+"})})]})}),Object(u.jsx)("td",{children:Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:null!=t.Check_RoboCall?t.Check_RoboCall:Object(u.jsx)("span",{children:"Contacts"})}),Object(u.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink",children:e.contacts.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return T(e,t.id,"fotografia")},children:e.First_Name+" "+e.Last_Name})},e.Email)}))}),Object(u.jsx)("span",{className:"ms-3",children:Object(u.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return I(t.id,"fotografia")},children:"+"})})]})}),Object(u.jsx)("td",{children:Object(u.jsxs)("div",{className:"dropdown",children:[Object(u.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:null!=t.Control?t.Control:Object(u.jsx)("span",{children:"Contacts"})}),Object(u.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink",children:e.contacts.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return T(e,t.id,"credenciales")},children:e.First_Name+" "+e.Last_Name})},e.Email)}))}),Object(u.jsx)("span",{className:"ms-3",children:Object(u.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){return I(t.id,"credenciales")},children:"+"})})]})})]},t.id)}))})]}),Object(u.jsxs)("div",{className:"text-center",style:{marginTop:"50px"},children:[Object(u.jsx)("span",{className:"text-left ",children:Object(u.jsx)("button",{type:"submit",id:"button",className:"btn btn-primary me-3",onClick:function(){e.volverTelefono()},children:"Volver"})}),Object(u.jsx)("span",{className:"text-center",children:Object(u.jsx)("button",{type:"submit",id:"button",className:"btn btn-primary ",onClick:function(t){d.length>=3*a.length?(d.forEach((function(t){0==e.asignarContacto(t.contact,t.mapStore,t.mod)&&!1})),e.onSubmit(t)):e.setShowError(!0)},children:"Continuar"})})]})]})},x=n(103),I=n(98),T=n(99),S=n(100),A=function(e){var t=Object(o.useState)(),n=Object(r.a)(t,2),a=n[0],c=n[1],f=Object(o.useState)(!0),b=Object(r.a)(f,2),m=b[0],j=b[1],p=Object(o.useState)([]),h=Object(r.a)(p,2),g=h[0],E=h[1],v=Object(o.useState)(!1),y=Object(r.a)(v,2),C=y[0],N=y[1],A=Object(o.useState)(!1),D=Object(r.a)(A,2),L=D[0],P=D[1],M=_(),w=M.contacto,F=M.setContacto,k=_(),U=k.contactoTipo,B=(k.setContactoTipo,Object(o.useState)(!1)),W=Object(r.a)(B,2),K=W[0],Z=W[1],X=Object(o.useState)({First_Name:"",Last_Name:"",Email:"",Phone:"",Mobile:"",Rol_Contacto:[],Stores_ids:[{}],stores_fotos:[{}],stores_credenciales:[{}],foto:!1,credenciales:!1,contacto:!1,flag:!1}),V=Object(r.a)(X,2),q=V[0],G=V[1];Object(o.useEffect)((function(){O.a.CRM.API.getRelatedRecords({Entity:"Deals",RecordID:e.id,RelatedList:"Oportunidades"}).then((function(e){c(e),j(!1)})),console.log(w),e.contacts.forEach((function(e){if(e.Stores_ids=[],e.stores_fotos=[],e.stores_credenciales=[],e.foto=!1,e.credenciales=!1,e.contacto=!1,e.Rol_Contacto.includes("Store Decision Maker")){var t=e.Rol_Contacto.filter((function(e){return"Store Decision Maker"!==e}));e.Rol_Contacto=t}})),E(e.contacts)}),[]);var H=function(e){G(Object(l.a)(Object(l.a)({},q),{},Object(s.a)({},e.target.name,e.target.value)))},z=function(){var e=!0;return g.forEach((function(t){t.Email!==q.Email&&t.Mobile!==q.Mobile||(e=!1)})),e},Y=function(){var e=!0,t=q.Email.indexOf("@"),n=q.Email.substr(t);return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(q.Email)&&"@rappi.com"!=n||(e=!1),Z("@rappi.com"==n),e},J=function(e){e.preventDefault();var t=d(q.Mobile);if(z()&&Y()&&t)E([].concat(Object(i.a)(g),[q])),G(Object(l.a)(Object(l.a)({},q),{},{Phone:""})),F({contact:q}),N(!1);else if(z()){var n=document.getElementById("Email");if(n.classList.remove("is-invalid"),(n=document.getElementById("Mobile")).classList.remove("is-invalid"),Y()){document.getElementById("Email").classList.remove("is-invalid")}else{var o=document.getElementById("Email");o.classList.add("is-invalid"),o.focus()}if(d(q.Mobile)){document.getElementById("Mobile").classList.remove("is-invalid")}else{var a=document.getElementById("Mobile");a.classList.add("is-invalid"),a.focus()}}else{var c=document.getElementById("Email");c.classList.add("is-invalid"),c.focus(),(c=document.getElementById("Mobile")).classList.add("is-invalid"),c.focus()}};return m?Object(u.jsx)("h3",{children:"Cargando"}):Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"row mt-3",children:[Object(u.jsx)("div",{className:"col"}),Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Contactos Stores"}),Object(u.jsx)("h6",{children:"Seleccione un contacto para cada M\xf3dulo"}),Object(u.jsx)(R,{stores:a,contacts:g,asignarContacto:function(e,t,n){if(null==e)return!1;var o=g.findIndex((function(t){return t.Email===e})),a=Object(i.a)(g);return"fotografia"==n&&(a[o].stores_fotos.some((function(e){return e.id==t.id}))||(a[o].stores_fotos.push(t),a[o].foto=!0,a[o].Rol_Contacto.push("Fotograf\xeda"))),"contacto"==n&&(a[o].Stores_ids.some((function(e){return e.id==t.id}))||(a[o].Stores_ids.push(t),a[o].contacto=!0,a[o].Rol_Contacto.push("Store Decision Maker"))),"credenciales"==n&&(a[o].stores_credenciales.some((function(e){return e.id==t.id}))||(a[o].stores_credenciales.push(t),a[o].credenciales=!0,a[o].Rol_Contacto.push("Credenciales"))),E(a),!0},onSubmit:function(t){t.preventDefault(),e.onSubmitSeleccion(g)},showPopUp:function(e){"fotografia"==e&&G(Object(l.a)(Object(l.a)({},q),{},{foto:!0})),"credenciales"==e&&G(Object(l.a)(Object(l.a)({},q),{},{credenciales:!0})),"contacto"==e&&G(Object(l.a)(Object(l.a)({},q),{},{contacto:!0})),G(Object(l.a)(Object(l.a)({},q),{},{Stores_ids:[],stores_credenciales:[],stores_fotos:[]})),N(!0)},setShowError:P,id:e.id,volverTelefono:e.volverTelefono})]}),L?Object(u.jsx)("div",{className:"mt-3 text-danger",children:"Debe Asociar un Contacto para cada Store, Fotograf\xeda y Credenciales"}):Object(u.jsx)("span",{})]}),Object(u.jsxs)(x.a,{isOpen:C,children:[Object(u.jsxs)(I.a,{children:[Object(u.jsx)("h5",{children:"Crear Nuevo Contacto"}),Object(u.jsx)("h6",{children:U})]}),Object(u.jsx)(T.a,{children:Object(u.jsx)("form",{className:"container",onSubmit:J,children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"form-group row mt-4",children:[Object(u.jsx)("label",{htmlFor:"First_Name1",className:"col-sm-2 col-form-label",children:"Nombre"}),Object(u.jsx)("div",{className:"col-sm-10",children:Object(u.jsx)("input",{type:"First_Name1",className:"form-control",name:"First_Name",id:"First_Name",placeholder:"Ingrese nombre del Contacto",onChange:H})})]}),Object(u.jsxs)("div",{className:"form-group row mt-3",children:[Object(u.jsx)("label",{htmlFor:"Last_Name1",className:"col-sm-2 col-form-label",children:"Apellido"}),Object(u.jsx)("div",{className:"col-sm-10",children:Object(u.jsx)("input",{type:"Last_Name1",className:"form-control",name:"Last_Name",id:"Last_Name",placeholder:"Ingrese Apellido del Contacto",onChange:H,required:!0})})]}),Object(u.jsxs)("div",{className:"form-group row mt-3",children:[Object(u.jsx)("label",{htmlFor:"Email1",className:"col-sm-2 col-form-label",children:"Email"}),Object(u.jsxs)("div",{className:"col-sm-10",children:[Object(u.jsx)("input",{type:"Email1",className:"form-control",name:"Email",id:"Email",placeholder:"Email",onChange:H,required:!0}),Object(u.jsx)("div",{id:"validationServerUsernameFeedback",className:"invalid-feedback",children:K?Object(u.jsx)("span",{children:"dominio @rappi.com no permitido"}):Object(u.jsx)("span",{children:"Email incorrecto"})})]})]}),Object(u.jsxs)("div",{className:"form-group row mt-3",children:[Object(u.jsx)("label",{htmlFor:"cel1",className:"col-sm-2 col-form-label",children:"Cel:"}),Object(u.jsxs)("div",{className:"col-sm-10",children:[Object(u.jsx)("input",{type:"cel1",className:"form-control",name:"Mobile",id:"Mobile",placeholder:"ej: +552131354684",onChange:H,required:!0}),Object(u.jsx)("div",{id:"validationServerUsernameFeedback",className:"invalid-feedback",children:'(c\xf3d de pa\xeds "+52")(cod ciudad "22") XXXXXXX'})]})]})]})})}),Object(u.jsxs)(S.a,{children:[Object(u.jsx)("button",{className:"btn btn-primary mt-3 mb-2",onClick:function(){return N(!1)},children:"Cancelar"}),Object(u.jsx)("button",{className:"btn btn-primary mt-3 mb-2",onClick:J,children:"Agregar Contacto"})]})]})]})})},D=function(){var e=Object(o.useState)({}),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(null),i=Object(r.a)(c,2),s=i[0],l=i[1],d=Object(o.useState)(["contacto"]),f=Object(r.a)(d,2),b=f[0],m=f[1],j=Object(o.useState)([]),p=Object(r.a)(j,2),h=p[0],E=p[1],_=Object(o.useState)(),C=Object(r.a)(_,2),N=C[0],R=C[1],x=Object(o.useState)([]),I=Object(r.a)(x,2),T=I[0],S=I[1],D=Object(o.useState)([]),L=Object(r.a)(D,2),P=L[0],M=L[1];Object(o.useEffect)((function(){O.a.embeddedApp.on("PageLoad",(function(e){console.log(e);var t=e.EntityId;l(t),console.log(t),O.a.CRM.API.getRecord({Entity:"Deals",RecordID:t}).then((function(e){R(e.data[0].Informaci_n_de_Contacto_Completa),a(e.data[0])})),O.a.CRM.API.getRelatedRecords({Entity:"Deals",RecordID:t,RelatedList:"Oportunidades"}).then((function(e){M(e.data),console.log(e.data)}))})),O.a.embeddedApp.init()}),[]);var w=function(e){m(e)};return null==N||"NO"==N?"contacto"==b?Object(u.jsx)(y,{onSubmitContacto:function(e){E(e),S(e),w("telefono")},stores:P}):"telefono"==b?Object(u.jsx)(v,{children:Object(u.jsx)(y,{onSubmitTelefonoStore:function(){w("seleccion")},stores:P})}):"seleccion"==b?Object(u.jsx)(v,{children:Object(u.jsx)(A,{stores:P,id:s,contacts:h,contactsFoto:T,onSubmitSeleccion:function(e,t){E(e),S(t),w("overView")},volverTelefono:function(){w("telefono")}})}):Object(u.jsx)(g,{id:s,volver:function(){w("seleccion")},record:n,contacts:h,contactsFoto:T}):Object(u.jsxs)("div",{className:"text-center mt-5",children:[Object(u.jsx)("h3",{className:"mt-5",children:"Contactos Cargados"}),Object(u.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(){O.a.embeddedApp.init().then((function(){return O.a.CRM.BLUEPRINT.proceed()})).then((function(e){console.log(e)}))},children:"Continuar"})]})};c.a.render(Object(u.jsx)(D,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.5896bba8.chunk.js.map